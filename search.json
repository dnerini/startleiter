[
  {
    "objectID": "statistics_cimetta.html",
    "href": "statistics_cimetta.html",
    "title": "Cimetta",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 1"
  },
  {
    "objectID": "statistics_cimetta.html#annual-statistics",
    "href": "statistics_cimetta.html#annual-statistics",
    "title": "Cimetta",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_cimetta.html#monthly-statistics",
    "href": "statistics_cimetta.html#monthly-statistics",
    "title": "Cimetta",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "statistics_montelema.html",
    "href": "statistics_montelema.html",
    "title": "Monte Lema",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 6"
  },
  {
    "objectID": "statistics_montelema.html#annual-statistics",
    "href": "statistics_montelema.html#annual-statistics",
    "title": "Monte Lema",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_montelema.html#monthly-statistics",
    "href": "statistics_montelema.html#monthly-statistics",
    "title": "Monte Lema",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "statistics_mornera.html",
    "href": "statistics_mornera.html",
    "title": "Mornera",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 5"
  },
  {
    "objectID": "statistics_mornera.html#annual-statistics",
    "href": "statistics_mornera.html#annual-statistics",
    "title": "Mornera",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_mornera.html#monthly-statistics",
    "href": "statistics_mornera.html#monthly-statistics",
    "title": "Mornera",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Startleiter",
    "section": "",
    "text": "Welcome to Starleiter! In this project, I used data analysis and machine learning techniques to explore the relationship between the atmospheric conditions and paragliding."
  },
  {
    "objectID": "index.html#project-overview",
    "href": "index.html#project-overview",
    "title": "Startleiter",
    "section": "Project Overview",
    "text": "Project Overview\nStartleiter is a recommendation system for paragliding pilots. Based on the nearest and most recently available radio-sounding, it computes the probability of flying on the current day, as well as the expected maximum flying height and distance.\nThe prediction model, a one-dimensional convolutional neural network (1D CNN), is trained on radio-sounding data from UWYO and flight reports from XContest. Startleiter also includes an explainability plot based on SHAP to gain insights on the output of the machine learning model, for example:"
  },
  {
    "objectID": "index.html#project-components",
    "href": "index.html#project-components",
    "title": "Startleiter",
    "section": "Project Components",
    "text": "Project Components\nThe project consists of the following components:\n\nData extraction.\nData exploration and visualization.\nData preprocessing and feature engineering.\nModel training and evaluation.\nPredictions."
  },
  {
    "objectID": "index.html#credits-and-sources",
    "href": "index.html#credits-and-sources",
    "title": "Startleiter",
    "section": "Credits and Sources",
    "text": "Credits and Sources\n\nFlight reports: XContest\nAtmospheric soundings: University of Wyoming\nGFS forecast data: NOAA\nExplainability score: SHAP\nSkewT plot: MetPy"
  },
  {
    "objectID": "statistics_cari.html",
    "href": "statistics_cari.html",
    "title": "Carì",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 2"
  },
  {
    "objectID": "statistics_cari.html#annual-statistics",
    "href": "statistics_cari.html#annual-statistics",
    "title": "Carì",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_cari.html#monthly-statistics",
    "href": "statistics_cari.html#monthly-statistics",
    "title": "Carì",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring_santamaria.html",
    "href": "monitoring_santamaria.html",
    "title": "Santa Maria",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 7\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6542\n      2023-04-24\n      0.088892\n      1200.0\n      0.0\n    \n    \n      6549\n      2023-04-25\n      0.086855\n      1200.0\n      0.0\n    \n    \n      6556\n      2023-04-26\n      0.119755\n      1800.0\n      25.0\n    \n    \n      6563\n      2023-04-27\n      0.091536\n      1200.0\n      0.0\n    \n    \n      6570\n      2023-04-28\n      0.171357\n      2200.0\n      50.0\n    \n    \n      6577\n      2023-04-29\n      0.174627\n      3200.0\n      50.0\n    \n    \n      6584\n      2023-04-30\n      0.142558\n      2000.0\n      50.0\n    \n    \n      6591\n      2023-05-01\n      0.372243\n      3200.0\n      125.0\n    \n    \n      6598\n      2023-05-02\n      0.824875\n      2000.0\n      125.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "statistics.html",
    "href": "statistics.html",
    "title": "Statistics",
    "section": "",
    "text": "Site statistics are based on flight reports extracted from XContest. The plots and figures are updated once a week.\n\n\n\n\n\n\n\n\n  \n\n\n\n\nCarì\n\n\n2000 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nCimetta\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Generoso\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Lema\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Tamaro\n\n\n1500 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMornera\n\n\n1400 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nSanta Maria\n\n\n1200 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "statistics_montetamaro.html",
    "href": "statistics_montetamaro.html",
    "title": "Monte Tamaro",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 3"
  },
  {
    "objectID": "statistics_montetamaro.html#annual-statistics",
    "href": "statistics_montetamaro.html#annual-statistics",
    "title": "Monte Tamaro",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_montetamaro.html#monthly-statistics",
    "href": "statistics_montetamaro.html#monthly-statistics",
    "title": "Monte Tamaro",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring_montelema.html",
    "href": "monitoring_montelema.html",
    "title": "Monte Lema",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 6\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6540\n      2023-04-24\n      0.064516\n      1600.0\n      0.0\n    \n    \n      6547\n      2023-04-25\n      0.064516\n      1600.0\n      0.0\n    \n    \n      6554\n      2023-04-26\n      0.069794\n      1600.0\n      0.0\n    \n    \n      6561\n      2023-04-27\n      0.064516\n      1600.0\n      0.0\n    \n    \n      6568\n      2023-04-28\n      0.095879\n      1600.0\n      0.0\n    \n    \n      6575\n      2023-04-29\n      0.096697\n      1600.0\n      0.0\n    \n    \n      6582\n      2023-04-30\n      0.081908\n      1600.0\n      0.0\n    \n    \n      6589\n      2023-05-01\n      0.288347\n      3600.0\n      50.0\n    \n    \n      6596\n      2023-05-02\n      0.647480\n      2400.0\n      50.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "statistics_montegeneroso.html",
    "href": "statistics_montegeneroso.html",
    "title": "Monte Generoso",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 4"
  },
  {
    "objectID": "statistics_montegeneroso.html#annual-statistics",
    "href": "statistics_montegeneroso.html#annual-statistics",
    "title": "Monte Generoso",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_montegeneroso.html#monthly-statistics",
    "href": "statistics_montegeneroso.html#monthly-statistics",
    "title": "Monte Generoso",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "statistics_santamaria.html",
    "href": "statistics_santamaria.html",
    "title": "Santa Maria",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 7"
  },
  {
    "objectID": "statistics_santamaria.html#annual-statistics",
    "href": "statistics_santamaria.html#annual-statistics",
    "title": "Santa Maria",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\nmed = dfg.median()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - med)).unstack()\nax = med.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_santamaria.html#monthly-statistics",
    "href": "statistics_santamaria.html#monthly-statistics",
    "title": "Santa Maria",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring_montetamaro.html",
    "href": "monitoring_montetamaro.html",
    "title": "Monte Tamaro",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 3\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6541\n      2023-04-24\n      0.098746\n      1500.0\n      0.0\n    \n    \n      6548\n      2023-04-25\n      0.095920\n      1500.0\n      0.0\n    \n    \n      6555\n      2023-04-26\n      0.132362\n      2100.0\n      25.0\n    \n    \n      6562\n      2023-04-27\n      0.102306\n      2100.0\n      25.0\n    \n    \n      6569\n      2023-04-28\n      0.204798\n      2300.0\n      50.0\n    \n    \n      6576\n      2023-04-29\n      0.211292\n      3500.0\n      50.0\n    \n    \n      6583\n      2023-04-30\n      0.159225\n      2300.0\n      50.0\n    \n    \n      6590\n      2023-05-01\n      0.372413\n      3500.0\n      50.0\n    \n    \n      6597\n      2023-05-02\n      0.856281\n      2300.0\n      50.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "monitoring_cari.html",
    "href": "monitoring_cari.html",
    "title": "Carì",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 2\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6537\n      2023-04-24\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6544\n      2023-04-25\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6551\n      2023-04-26\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6558\n      2023-04-27\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6565\n      2023-04-28\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6572\n      2023-04-29\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6579\n      2023-04-30\n      0.064516\n      2000.0\n      0.0\n    \n    \n      6586\n      2023-05-01\n      0.139366\n      3000.0\n      125.0\n    \n    \n      6593\n      2023-05-02\n      0.372304\n      2800.0\n      125.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "monitoring_mornera.html",
    "href": "monitoring_mornera.html",
    "title": "Mornera",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 5\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6538\n      2023-04-24\n      0.064516\n      1400.0\n      0.0\n    \n    \n      6545\n      2023-04-25\n      0.064516\n      1400.0\n      0.0\n    \n    \n      6552\n      2023-04-26\n      0.070692\n      1400.0\n      0.0\n    \n    \n      6559\n      2023-04-27\n      0.064516\n      1400.0\n      0.0\n    \n    \n      6566\n      2023-04-28\n      0.096359\n      1400.0\n      0.0\n    \n    \n      6573\n      2023-04-29\n      0.098082\n      1400.0\n      0.0\n    \n    \n      6580\n      2023-04-30\n      0.083108\n      1400.0\n      0.0\n    \n    \n      6587\n      2023-05-01\n      0.288699\n      3400.0\n      125.0\n    \n    \n      6594\n      2023-05-02\n      0.646056\n      3400.0\n      200.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "monitoring_montegeneroso.html",
    "href": "monitoring_montegeneroso.html",
    "title": "Monte Generoso",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 4\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6539\n      2023-04-24\n      0.091961\n      1600.0\n      0.0\n    \n    \n      6546\n      2023-04-25\n      0.089464\n      1600.0\n      0.0\n    \n    \n      6553\n      2023-04-26\n      0.123666\n      2200.0\n      25.0\n    \n    \n      6560\n      2023-04-27\n      0.094993\n      1600.0\n      0.0\n    \n    \n      6567\n      2023-04-28\n      0.184420\n      2400.0\n      50.0\n    \n    \n      6574\n      2023-04-29\n      0.188727\n      3600.0\n      50.0\n    \n    \n      6581\n      2023-04-30\n      0.148446\n      2400.0\n      50.0\n    \n    \n      6588\n      2023-05-01\n      0.372328\n      3600.0\n      50.0\n    \n    \n      6595\n      2023-05-02\n      0.843780\n      2400.0\n      50.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "monitoring_cimetta.html",
    "href": "monitoring_cimetta.html",
    "title": "Cimetta",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 1\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\nPredictions for the next days.\n  \n    \n      \n      validtime\n      flying_probability\n      max_altitude_masl\n      max_distance_km\n    \n  \n  \n    \n      6536\n      2023-04-24\n      0.071192\n      1600.0\n      0.0\n    \n    \n      6543\n      2023-04-25\n      0.069575\n      1600.0\n      0.0\n    \n    \n      6550\n      2023-04-26\n      0.096224\n      1600.0\n      0.0\n    \n    \n      6557\n      2023-04-27\n      0.072592\n      1600.0\n      0.0\n    \n    \n      6564\n      2023-04-28\n      0.135566\n      2600.0\n      50.0\n    \n    \n      6571\n      2023-04-29\n      0.136983\n      3600.0\n      50.0\n    \n    \n      6578\n      2023-04-30\n      0.115215\n      2400.0\n      50.0\n    \n    \n      6585\n      2023-05-01\n      0.359303\n      3600.0\n      50.0\n    \n    \n      6592\n      2023-05-02\n      0.758902\n      2400.0\n      125.0\n    \n  \n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts > 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nclim = clim[clim.index > datetime.now(timezone.utc) - timedelta(days=90)]\nclim_counts = clim_counts[clim_counts.index > datetime.now(timezone.utc) - timedelta(days=90)]\ndfs = df_flight[df_flight.datetime > datetime.now(timezone.utc) - timedelta(days=90)]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nplt.xticks(rotation=30)\nplt.tight_layout()\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "monitoring.html",
    "href": "monitoring.html",
    "title": "Predictions",
    "section": "",
    "text": "Carì\n\n\n2000 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nCimetta\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Generoso\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Lema\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Tamaro\n\n\n1500 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMornera\n\n\n1400 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\n  \n\n\n\n\nSanta Maria\n\n\n1200 masl\n\n\n\n\n\n\n\n\n\nApr 24, 2023\n\n\n\n\n\n\nNo matching items"
  }
]