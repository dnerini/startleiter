[
  {
    "objectID": "statistics_montetamaro.html",
    "href": "statistics_montetamaro.html",
    "title": "Monte Tamaro",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 3\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_montetamaro.html#annual-statistics",
    "href": "statistics_montetamaro.html#annual-statistics",
    "title": "Monte Tamaro",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_montetamaro.html#monthly-statistics",
    "href": "statistics_montetamaro.html#monthly-statistics",
    "title": "Monte Tamaro",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "statistics_cari.html",
    "href": "statistics_cari.html",
    "title": "Carì",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 2\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_cari.html#annual-statistics",
    "href": "statistics_cari.html#annual-statistics",
    "title": "Carì",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_cari.html#monthly-statistics",
    "href": "statistics_cari.html#monthly-statistics",
    "title": "Carì",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "statistics_montelema.html",
    "href": "statistics_montelema.html",
    "title": "Monte Lema",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 6\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_montelema.html#annual-statistics",
    "href": "statistics_montelema.html#annual-statistics",
    "title": "Monte Lema",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_montelema.html#monthly-statistics",
    "href": "statistics_montelema.html#monthly-statistics",
    "title": "Monte Lema",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring_montegeneroso.html",
    "href": "monitoring_montegeneroso.html",
    "title": "Monte Generoso",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 4\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13545\n2023-11-26\n0.916387\n2400.0\n50.0\n\n\n13552\n2023-11-27\n0.942652\n2400.0\n100.0\n\n\n13559\n2023-11-28\n0.912826\n2000.0\n100.0\n\n\n13566\n2023-11-29\n0.924684\n2400.0\n50.0\n\n\n13573\n2023-11-30\n0.854089\n2400.0\n50.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_3120/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "monitoring_cari.html",
    "href": "monitoring_cari.html",
    "title": "Carì",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 2\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13543\n2023-11-26\n0.519704\n2800.0\n100.0\n\n\n13550\n2023-11-27\n0.707621\n2800.0\n100.0\n\n\n13557\n2023-11-28\n0.392717\n2400.0\n100.0\n\n\n13564\n2023-11-29\n0.581615\n2800.0\n100.0\n\n\n13571\n2023-11-30\n0.291154\n2800.0\n50.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_3026/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "statistics_mornera.html",
    "href": "statistics_mornera.html",
    "title": "Mornera",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 5\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_mornera.html#annual-statistics",
    "href": "statistics_mornera.html#annual-statistics",
    "title": "Mornera",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_mornera.html#monthly-statistics",
    "href": "statistics_mornera.html#monthly-statistics",
    "title": "Mornera",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring.html",
    "href": "monitoring.html",
    "title": "Predictions",
    "section": "",
    "text": "Carì\n\n\n2000 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nCimetta\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Generoso\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Lema\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Tamaro\n\n\n1500 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMornera\n\n\n1400 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nSanta Maria\n\n\n1200 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "statistics_santamaria.html",
    "href": "statistics_santamaria.html",
    "title": "Santa Maria",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 7\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_santamaria.html#annual-statistics",
    "href": "statistics_santamaria.html#annual-statistics",
    "title": "Santa Maria",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_santamaria.html#monthly-statistics",
    "href": "statistics_santamaria.html#monthly-statistics",
    "title": "Santa Maria",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring_santamaria.html",
    "href": "monitoring_santamaria.html",
    "title": "Santa Maria",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 7\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13548\n2023-11-26\n0.768937\n1200.0\n10.0\n\n\n13555\n2023-11-27\n0.875694\n1600.0\n50.0\n\n\n13562\n2023-11-28\n0.775469\n1600.0\n200.0\n\n\n13569\n2023-11-29\n0.817278\n1600.0\n10.0\n\n\n13576\n2023-11-30\n0.643918\n1600.0\n10.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_2742/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "statistics_montegeneroso.html",
    "href": "statistics_montegeneroso.html",
    "title": "Monte Generoso",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 4\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_montegeneroso.html#annual-statistics",
    "href": "statistics_montegeneroso.html#annual-statistics",
    "title": "Monte Generoso",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_montegeneroso.html#monthly-statistics",
    "href": "statistics_montegeneroso.html#monthly-statistics",
    "title": "Monte Generoso",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "monitoring_mornera.html",
    "href": "monitoring_mornera.html",
    "title": "Mornera",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 5\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13544\n2023-11-26\n0.717589\n2200.0\n200.0\n\n\n13551\n2023-11-27\n0.861592\n2200.0\n200.0\n\n\n13558\n2023-11-28\n0.701206\n2200.0\n200.0\n\n\n13565\n2023-11-29\n0.777509\n2200.0\n150.0\n\n\n13572\n2023-11-30\n0.362103\n2200.0\n50.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_2796/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "statistics_cimetta.html",
    "href": "statistics_cimetta.html",
    "title": "Cimetta",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 1\nCode\nfrom datetime import datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights\n\nengine = get_engine()\ndf = get_flights(engine, TARGET_SITE_ID)"
  },
  {
    "objectID": "statistics_cimetta.html#annual-statistics",
    "href": "statistics_cimetta.html#annual-statistics",
    "title": "Cimetta",
    "section": "Annual statistics",
    "text": "Annual statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Year\")\n\n\n\n\n\nFigure 1: Total number of flights per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).max_altitude_m\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max altitude [masl]\", xlabel=\"Year\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 2: Maximum flight altitude per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).length_km\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max distance [km]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 3: Maximum flight distance per year\n\n\n\n\n\n\nCode\ndfg = df.groupby(df.datetime.dt.year).airtime_hours\ndmed = dfg.median()\ndmax = dfg.max()\nerr = (np.abs(dfg.quantile([0.1, 0.9]) - dmed)).unstack()\nax = dmed.plot.bar(yerr=err.values.T, ylabel=\"Max airtime [h]\")\nfor i, p in enumerate(ax.patches):\n    ax.plot(p.get_center()[0], dmax.iloc[i], marker=\"*\", ls=None, c=\"C0\")\n\n\n\n\n\nFigure 4: Maximum flight duration per year"
  },
  {
    "objectID": "statistics_cimetta.html#monthly-statistics",
    "href": "statistics_cimetta.html#monthly-statistics",
    "title": "Cimetta",
    "section": "Monthly statistics",
    "text": "Monthly statistics\n\n\nCode\ndfg = df.groupby(df.datetime.dt.month).datetime.count()\nax = dfg.plot(kind=\"bar\", ylabel=\"No. of flights []\", xlabel=\"Month\")\n\n\n\n\n\nFigure 5: Total number of flights per month\n\n\n\n\n\n\nCode\nmonths = pd.date_range(\"1900-01-01\", \"1900-12-01\", freq='MS').strftime(\"%b\")\nax = sns.catplot(x=\"month\", y=\"max_altitude_m\", order=months, data=df)\n\n\n\n\n\nFigure 6: Maximum flight altitude per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"length_km\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 7: Maximum flight distance per month\n\n\n\n\n\n\nCode\nax = sns.catplot(x=\"airtime_hours\", y=\"month\", order=months, data=df)\n\n\n\n\n\nFigure 8: Maximum flight duration per month"
  },
  {
    "objectID": "statistics.html",
    "href": "statistics.html",
    "title": "Statistics",
    "section": "",
    "text": "Site statistics are based on flight reports extracted from XContest. The plots and figures are updated once a week.\n\n\n\n\n\n\n\n\n  \n\n\n\n\nCarì\n\n\n2000 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nCimetta\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Generoso\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Lema\n\n\n1600 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMonte Tamaro\n\n\n1500 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nMornera\n\n\n1400 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\n  \n\n\n\n\nSanta Maria\n\n\n1200 masl\n\n\n\n\n\n\n\n\n\nNov 26, 2023\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Startleiter",
    "section": "",
    "text": "Welcome to Starleiter! In this project, I used data analysis and machine learning techniques to explore the relationship between the atmospheric conditions and paragliding."
  },
  {
    "objectID": "index.html#project-overview",
    "href": "index.html#project-overview",
    "title": "Startleiter",
    "section": "Project Overview",
    "text": "Project Overview\nStartleiter is a recommendation system for paragliding pilots. Based on the nearest and most recently available radio-sounding, it computes the probability of flying on the current day, as well as the expected maximum flying height and distance.\nThe prediction model, a one-dimensional convolutional neural network (1D CNN), is trained on radio-sounding data from UWYO and flight reports from XContest. Startleiter also includes an explainability plot based on SHAP to gain insights on the output of the machine learning model, for example:"
  },
  {
    "objectID": "index.html#project-components",
    "href": "index.html#project-components",
    "title": "Startleiter",
    "section": "Project Components",
    "text": "Project Components\nThe project consists of the following components:\n\nData extraction.\nData exploration and visualization.\nData preprocessing and feature engineering.\nModel training and evaluation.\nPredictions."
  },
  {
    "objectID": "index.html#credits-and-sources",
    "href": "index.html#credits-and-sources",
    "title": "Startleiter",
    "section": "Credits and Sources",
    "text": "Credits and Sources\n\nFlight reports: XContest\nAtmospheric soundings: University of Wyoming\nGFS forecast data: NOAA\nExplainability score: SHAP\nSkewT plot: MetPy"
  },
  {
    "objectID": "monitoring_montetamaro.html",
    "href": "monitoring_montetamaro.html",
    "title": "Monte Tamaro",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 3\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13547\n2023-11-26\n0.834854\n1500.0\n25.0\n\n\n13554\n2023-11-27\n0.905202\n1900.0\n100.0\n\n\n13561\n2023-11-28\n0.826204\n1500.0\n100.0\n\n\n13568\n2023-11-29\n0.857790\n1900.0\n25.0\n\n\n13575\n2023-11-30\n0.621569\n1900.0\n10.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_3077/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "monitoring_montelema.html",
    "href": "monitoring_montelema.html",
    "title": "Monte Lema",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 6\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13546\n2023-11-26\n0.656056\n2400.0\n50.0\n\n\n13553\n2023-11-27\n0.823418\n2400.0\n100.0\n\n\n13560\n2023-11-28\n0.629242\n2000.0\n100.0\n\n\n13567\n2023-11-29\n0.706283\n2400.0\n50.0\n\n\n13574\n2023-11-30\n0.356295\n2400.0\n50.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_3351/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  },
  {
    "objectID": "monitoring_cimetta.html",
    "href": "monitoring_cimetta.html",
    "title": "Cimetta",
    "section": "",
    "text": "Code\nTARGET_SITE_ID = 1\n\n\n\n\nCode\nfrom datetime import date, datetime, timedelta, timezone\n\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport seaborn as sns\n\nfrom startleiter.utils import get_engine, get_flights, get_predictions\n\nengine = get_engine()\ndf_flight = get_flights(engine, TARGET_SITE_ID)\ndf_pred = get_predictions(engine, TARGET_SITE_ID)\n\n\n\n\nCode\ntoday_idx = df_pred.reftime==pd.to_datetime(date.today())\ndf_pred[today_idx].drop([\"id\", \"reftime\", \"source_id\", \"leadtime_days\"], axis=1)\n\n\n\n\n\n\nPredictions for the next days. \n\n\n\nvalidtime\nflying_probability\nmax_altitude_masl\nmax_distance_km\n\n\n\n\n13542\n2023-11-26\n0.847662\n2400.0\n100.0\n\n\n13549\n2023-11-27\n0.915584\n2400.0\n100.0\n\n\n13556\n2023-11-28\n0.826284\n2000.0\n200.0\n\n\n13563\n2023-11-29\n0.870228\n2400.0\n100.0\n\n\n13570\n2023-11-30\n0.441512\n2400.0\n50.0\n\n\n\n\n\n\n\n\n\nCode\nsns.set()\n\nts = df_flight.set_index(\"datetime\").sort_index()\nkeep_cols = [\"date\", \"max_altitude_m\", \"length_km\", \"airtime_hours\"]\nts = ts[keep_cols]\nempty_row = pd.Series(name=pd.Timestamp.today(tz=\"UTC\"), data=[None,] * len(keep_cols), index=keep_cols)\nts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n# compute reference statistics\nn_years = 6\nclim = ts.resample(\"1D\").mean(numeric_only=True)\nclim = clim.groupby(clim.index.isocalendar().week)\nclim = clim.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim = clim.sort_index().rolling(\"20D\", center=True).mean()\n\nclim_counts = ts.date.resample(\"1D\").count()\nclim_counts = clim_counts.where(clim_counts &gt; 0)\nclim_counts = clim_counts.groupby(clim_counts.index.isocalendar().week)\nclim_counts = clim_counts.rolling(window=f\"{n_years * 365}D\", center=False).mean().reset_index(0, drop=True)\nclim_counts = clim_counts.sort_index().rolling(\"20D\", center=True).mean()\n\nend = datetime.now(timezone.utc)\nstart = end - timedelta(days=90)\nclim = clim[clim.index &gt; start]\nclim_counts = clim_counts[clim_counts.index &gt; start]\ndfs = df_flight[df_flight.datetime &gt; start]\ndfg = dfs.groupby(df_flight.date).datetime.count()\n\nfig, axs = plt.subplots(4, sharex=True, figsize=(7, 10))\n\n# reference lines\naxs[0].plot(clim_counts.index, clim_counts.values, color=\"tab:red\")\naxs[1].plot(clim.index, clim.max_altitude_m, color=\"tab:red\")\naxs[2].plot(clim.index, clim.length_km, color=\"tab:red\")\naxs[3].plot(clim.index, clim.airtime_hours, color=\"tab:red\")\naxs[3].tick_params(axis=\"x\", labelrotation=45)\n\n# predictions\npred = df_pred[df_pred.leadtime_days==0].set_index(\"validtime\").sort_index()\naxs[0].twinx().step(pred.index, pred.flying_probability, color=\"gray\", alpha=0.5)\ntwinx = plt.gca()\ntwinx.grid(None)\ntwinx.set_ylim([0, 1])\ntwinx.set_ylabel(\"Flyability []\")\naxs[1].step(pred.index, pred.max_altitude_masl, color=\"gray\", alpha=0.5)\naxs[2].step(pred.index, pred.max_distance_km, color=\"gray\", alpha=0.5)\n\n# plot individual flights\nax0 = sns.scatterplot(x=dfg.index, y=dfg.values, marker=\"x\", ax=axs[0])\nax1 = sns.scatterplot(x=\"datetime\", y=\"max_altitude_m\", marker=\"x\", data=dfs, ax=axs[1])\nax2 = sns.scatterplot(x=\"datetime\", y=\"length_km\", marker=\"x\", data=dfs, ax=axs[2])\nax3 = sns.scatterplot(x=\"datetime\", y=\"airtime_hours\", marker=\"x\", data=dfs, ax=axs[3])\n\nax0.set(ylabel=\"No. flights per day\")\nax1.set(ylabel=\"Max altitude [m]\")\nax2.set(ylabel=\"Distance [km]\")\nax3.set(ylabel=\"Airtime [h]\")\n\nax0.set_xlim([start, end])\nax1.set_xlim([start, end])\nax2.set_xlim([start, end])\nax3.set_xlim([start, end])\n\nplt.tight_layout()\n\n\n/tmp/ipykernel_3439/1760847598.py:7: FutureWarning: The behavior of DataFrame concatenation with empty or all-NA entries is deprecated. In a future version, this will no longer exclude empty or all-NA columns when determining the result dtypes. To retain the old behavior, exclude the relevant entries before the concat operation.\n  ts = pd.concat([ts, empty_row.to_frame().transpose()])\n\n\n\n\n\nFigure 1: Overview over the past 90 days"
  }
]